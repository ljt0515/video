var MAC={"Url":document.URL,"Title":document.title,"UserAgent":function(){var a=navigator.userAgent;return{"mobile":!!a.match(/AppleWebKit.*Mobile.*/),"ios":!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),"android":a.indexOf("Android")>-1||a.indexOf("Linux")>-1,"iPhone":a.indexOf("iPhone")>-1||a.indexOf("Mac")>-1,"iPad":a.indexOf("iPad")>-1,"trident":a.indexOf("Trident")>-1,"presto":a.indexOf("Presto")>-1,"webKit":a.indexOf("AppleWebKit")>-1,"gecko":a.indexOf("Gecko")>-1&&a.indexOf("KHTML")==-1,"weixin":a.indexOf("MicroMessenger")>-1}}(),"Copy":function(a){if(window.clipboardData){window.clipboardData.setData("Text",a)}else{if($("#mac_flash_copy").get(0)==undefined){$('<div id="mac_flash_copy"></div>')}else{$("#mac_flash_copy").html("")}$("#mac_flash_copy").html("<embed src="+'"images/_clipboard.swf" FlashVars="clipboard='+escape(a)+'" width="0" height="0" type="application/x-shockwave-flash"></embed>')}MAC.Pop.Msg(100,20,"复制成功",1000)},"Home":function(d,a){try{d.style.behavior="url(#default#homepage)";d.setHomePage(a)}catch(c){if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(c){MAC.Pop.Msg(150,40,"此操作被浏览器拒绝！请手动设置",1000)}var b=Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);b.setCharPref("browser.startup.homepage",a)}}},"Fav":function(a,b){try{window.external.addFavorite(a,b)}catch(c){try{window.sidebar.addPanel(b,a,"")}catch(c){MAC.Pop.Msg(150,40,"加入收藏出错，请使用键盘Ctrl+D进行添加",1000)}}},"Open":function(b,a,c){window.open(b,"macopen1","toolbars=0, scrollbars=0, location=0, statusbars=0,menubars=0,resizable=yes,width="+a+",height="+c+"")},"Cookie":{"Set":function(b,c,e){var d=new Date();d.setTime(d.getTime()+e*24*60*60*1000);var a=document.cookie.match(new RegExp("(^| )"+b+"=([^;]*)(;|$)"));localStorage.setItem(b,encodeURIComponent(c))},"Get":function(b){localStorage.getItem(b);var a=document.cookie.match(new RegExp("(^| )"+b+"=([^;]*)(;|$)"));if(a!=null){return decodeURIComponent(a[2]);return null}},"Del":function(a){var c=new Date();c.setTime(c.getTime()-1);var b=this.Get(a);if(b!=null){document.cookie=a+"="+encodeURIComponent(b)+";path=/;expires="+c.toUTCString()}localStorage.removeItem(a)}},"GoBack":function(){var a=document.domain;if(document.referrer.indexOf(a)>0){history.back()}else{window.location="//"+a}},"CheckBox":{"All":function(a){$("input[name='"+a+"']").each(function(){this.checked=true})},"Other":function(a){$("input[name='"+a+"']").each(function(){this.checked=!this.checked})},"Count":function(b){var a=0;$("input[name='"+b+"']").each(function(){if(this.checked){a++}});return a},"Ids":function(b){var a=[];$("input[name='"+b+"']").each(function(){if(this.checked){a.push(this.value)}});return a.join(",")}},"Image":{"Lazyload":{"Show":function(){try{$("img.lazy").lazy_load()}catch(a){}},"Box":function(a){$("img.lazy").lazy_load({container:$("#"+a)})}}},"Ding":{"Init":function(){$("body").on("click",".ding_link",function(b){var a=$(this);if(a.attr("data-id")){VideoTheme.Ajax("/video/ding.html?id="+a.attr("data-id")+"&type="+a.attr("data-type"),"get","json","",function(c){a.addClass("disabled");if(c.code==1){a.find(".ding_num").html(parseInt(a.find(".ding_num").html())+1)}else{layer.msg(c.msg)}})}})}},"Gbook":{"Login":0,"Verify":0,"Init":function(){$("body").on("keyup",".message_content",function(a){MAC.Remaining($(this),200,".message_remaining")});$("body").on("focus",".message_content",function(a){if(MAC.Gbook.Login==1&&MAC.User.IsLogin!=1){MAC.User.Login()}});$("body").on("click",".message_submit",function(a){MAC.Gbook.Submit()})},"Show":function(a){VideoTheme.Ajax("/message/index?page="+a,"post","json","",function(b){$(".mac_message_box").html(b)},function(){$(".mac_message_box").html("留言加载失败，请刷新...")})},"Submit":function(){if($(".message_content").val()==""){MAC.Pop.Msg(100,20,"请输入您的留言!",1000);return false}VideoTheme.Ajax("/message/saveData","post","json",$(".message_form").serialize(),function(a){MAC.Pop.Msg(100,20,a.msg,1000);if(a.code==1){location.reload()}else{if(MAC.Gbook.Verify==1){MAC.Verify.Refresh()}}})},"Report":function(a,b){MAC.Pop.Show(400,300,"数据报错","/message/report.html?id="+b+"&name="+encodeURIComponent(a),function(c){})}},"Search":{"Init":function(){$(".mac_search").click(function(){var b=$(this);var a=b.attr("data-href")?b.attr("data-href"):"/index.php/vod/search.html";location.href=a+"?wd="+encodeURIComponent($("#wd").val())})},"Submit":function(){return false}},"Ulog":{"Init":function(){MAC.Ulog.Set();MAC.Ulog.Click()},"Get":function(b,f,d,e,a,c){VideoTheme.Ajax("/index.php/user/ajax_ulog/?ac=list&mid="+b+"&id="+f+"&type="+d+"&page="+e+"&limit="+a,"get","json","",c)},"Set":function(){if($(".mac_ulog_set").attr("data-mid")){var a=$(".mac_ulog_set");$.get("/index.php/user/ajax_ulog/?ac=set&mid="+a.attr("data-mid")+"&id="+a.attr("data-id")+"&sid="+a.attr("data-sid")+"&nid="+a.attr("data-nid")+"&type="+a.attr("data-type"))}},"Click":function(){$("body").on("click","a.mac_ulog",function(b){if(VideoCms.User.IsLogin==0){VideoCms.User.Login();
        return}var a=$(this);if(a.attr("data-id")){VideoTheme.Ajax("/index.php/user/ajax_ulog/?ac=set&mid="+a.attr("data-mid")+"&id="+a.attr("data-id")+"&type="+a.attr("data-type"),"get","json","",function(c){MAC.Pop.Msg(100,20,c.msg,1000);if(c.code==1){a.addClass("disabled")}else{a.attr("title",c.msg)}})}})}},"Pop":{"Remove":function(){$(".mac_pop_bg").remove();$(".mac_pop").remove()},"RemoveMsg":function(){$(".mac_pop_msg_bg").remove();$(".mac_pop_msg").remove()},"Msg":function(d,b,a,c){if($(".mac_pop_bg").length!=1){MAC.Pop.Remove()}$("body").append('<div class="mac_pop_msg_bg"></div><div class="mac_pop_msg"><div class="pop-msg"></div></div>');$(".mac_pop_msg .pop_close").click(function(){$(".mac_pop_msg").remove()});$(".mac_pop_msg").width(d);$(".mac_pop_msg").height(b);$(".mac_pop_msg .pop-msg").html(a);$(".mac_pop_msg_bg,.mac_pop_msg").show();setTimeout(MAC.Pop.RemoveMsg,c)},"Show":function(d,a,c,b,e){if($(".mac_pop_bg").length!=1){MAC.Pop.Remove()}$("body").append('<div class="mac_pop_bg"></div><div class="mac_pop"><div class="pop_top"><h2></h2><span class="pop_close">Ｘ</span></div><div class="pop_content"></div></div>');$(".mac_pop .pop_close").click(function(){$(".mac_pop_bg,.mac_pop").remove()});$(".mac_pop").width(d);$(".mac_pop").height(a);$(".pop_content").html("");$(".pop_top").find("h2").html(c);VideoTheme.Ajax(b,"post","json","",function(f){$(".pop_content").html(f);e(f)},function(){$(".pop_content").html("加载失败，请刷新...")});$(".mac_pop_bg,.mac_pop").show()}},"Remaining":function(d,a,b){var c=a-$(d).val().length;if(c<0){c=0;$(d).val($(d).val().substr(0,200))}$(b).text(c)}};$(function(){MAC.Ding.Init()});
function SelectTag(a){this.child=a.child||".btn",this.over=a.over||"btn-warm",this.all=a.all||".all",this.init()}$.extend(SelectTag.prototype,{init:function(){var a=this;a._bindEvent(),a._select()},_bindEvent:function(){var a=this;$(a.child).click(function(d){if($(this).attr("class").indexOf("text-muted")!=-1){return}d.preventDefault();var b=window.location.href,f=$(this).attr("rel"),c=$(this).attr("name");$(this).hasClass(a.over)||(window.location.href=a._changeURLPar(b,c,f))}),$(a.all).click(function(c){c.preventDefault();var b=window.location.href,d=$(this).attr("name");$("[name="+d+"]").removeClass(a.over),$(this).addClass(a.over),window.location.href=a._delUrlPar(b,d)})},_delUrlPar:function(c,f){var g="";if(c.indexOf("?")==-1){return c}g=c.substr(c.indexOf("?")+1);var d="",b="";if(g.indexOf("&")!=-1){d=g.split("&");for(i in d){d[i].split("=")[0]!=f&&(b=b+d[i].split("=")[0]+"="+d[i].split("=")[1]+"&")}return c.substr(0,c.indexOf("?"))+"?"+b.substr(0,b.length-1)}return d=g.split("="),d[0]==f?c.substr(0,c.indexOf("?")):c},_changeURLPar:function(d,h,c){var j=this,g=h+"=([^&]*)",b=h+"="+c,f=encodeURI(j._getQueryString(h));return d.match(g)?d=d.replace(f,c):d.match("[?]")?d+"&"+b:d+"?"+b},_getQueryString:function(b){var c=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(c);return null!=a?decodeURI(a[2]):null},_select:function(){var a=this,b=window.location.href;$(a.child).each(function(){var c=$(this).attr("name")+"="+$(this).attr("rel"),e=new RegExp(encodeURI(c),"g");if(e.test(b)){$(this).addClass(a.over);var d=$(this).attr("name");$("[name="+d+"]").eq(0).removeClass(a.over)}else{if($(this).attr("class").indexOf("all")<0){$(this).removeClass(a.over)}}})}});