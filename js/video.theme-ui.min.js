var VideoTheme={Browser:{url:document.URL,domain:document.domain,title:document.title,language:(navigator.browserLanguage||navigator.language).toLowerCase(),canvas:!!document.createElement("canvas").getContext,useragent:function(){var e=navigator.userAgent;return{mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<e.indexOf("Android")||-1<e.indexOf("Linux"),iPhone:-1<e.indexOf("iPhone")||-1<e.indexOf("Mac"),iPad:-1<e.indexOf("iPad"),trident:-1<e.indexOf("Trident"),presto:-1<e.indexOf("Presto"),webKit:-1<e.indexOf("AppleWebKit"),gecko:-1<e.indexOf("Gecko")&&-1==e.indexOf("KHTML"),weixin:-1<e.indexOf("MicroMessenger")}}()},LocalStorage:{Set:function(e,i,t){if("undefined"!==i){var o={time:t?Date.now()+24*t*60*60*1e3:0,value:i};o=JSON.stringify(o);try{localStorage.setItem(e,o)}catch(i){localStorage.clear(),localStorage.setItem(e,o)}}},Get:function(e){var i=localStorage.getItem(e);return 0===(i=JSON.parse(i)||{}).time?i.value:Date.now()>i.time?(localStorage.removeItem(e),""):void 0!==i.value?i.value:""},Del:function(e,i){if(i){if(!window.confirm(i))return!1;localStorage.removeItem(e)}else localStorage.removeItem(e)}},Cookie:{Set:function(e,i,t){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3);document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));document.cookie=e+"="+encodeURIComponent(i)+";path=/;expires="+o.toUTCString()},Get:function(e){var i=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));if(null!=i)return decodeURIComponent(i[2])},Del:function(e){var i=new Date;i.setTime(i.getTime()-1);var t=this.Get(e);null!=t&&(document.cookie=e+"="+encodeURIComponent(t)+";path=/;expires="+i.toUTCString())}},Ajax:function(e,i,t,o,n,a,r){i=i||"get",t=t||"json",o=o||"",a=a||"",r=r||"";var l=layer.load(1,{shade:[.1,"#fff"]});$.ajax({url:e,type:i,dataType:t,data:o,timeout:5e4,beforeSend:function(e){},error:function(e,i,t){layer.close(l),a&&a(e,i,t)},success:function(e){layer.close(l),n(e)},complete:function(e,i){r&&r(e,i)}})},Mobile:{Nav:{Init:function(){$(".nav-slide").length&&$(".nav-slide").each(function(){var e=$(this);VideoTheme.Mobile.Nav.Set(e,e.attr("data-align"))})},Set:function(e,i){$index=1*e.find(".active").index(),$index>3?$index-=3:$index=0,e.flickity({cellAlign:i,freeScroll:!0,contain:!0,prevNextButtons:!1,pageDots:!1,percentPosition:!0,initialIndex:$index})}},Mshare:function(){$(".open-share").click(function(){VideoTheme.Browser.useragent.weixin?$("body").append('<div class="mobile-share share-weixin"></div>'):$("body").append('<div class="mobile-share share-other"></div>'),$(".mobile-share").click(function(){$(".mobile-share").remove(),$("body").removeClass("modal-open")})})}},Images:{Lazyload:function(){$(".lazy_load").lazy_load({effect:"fadeIn",threshold:200,failure_limit:1,skip_invisible:!1})},Qrcode:{Init:function(){if($("#qrcode").length){var e=$("#qrcode");VideoTheme.Images.Qrcode.Set(),e.attr("class","img-responsive")}},Set:function(e){e=0||location.href,new QRCode("qrcode",{text:e,width:120,height:120,correctLevel:QRCode.CorrectLevel.H})}},Flickity:{Init:function(){$(".flickity").length&&$(".flickity").each(function(){var e=$(this);VideoTheme.Images.Flickity.Set(e,e.attr("data-align"),e.attr("data-dots"),e.attr("data-next"),e.attr("data-play")),VideoTheme.Images.Lazyload()})},Set:function(e,i,t,o,n){t=t||!1,o=o||!1,n=n||!1,e.flickity({cellAlign:i,wrapAround:!0,contain:!0,pageDots:t,autoPlay:n,percentPosition:!0,prevNextButtons:o})}}},Link:{Copy:{Init:function(){$(".video-copy-link").each(function(){var e=$(this).attr("data-url");VideoTheme.Link.Copy.Set(this,e)}),$(".video-copy-html").each(function(){var e=$(this).parent().find(".content").html();VideoTheme.Link.Copy.Set(this,e)})},Set:function(e,i){var t=new Clipboard(e,{text:function(){return i}});t.on("success",function(e){layer.msg("复制成功")}),t.on("error",function(e){layer.msg("复制失败，请手动复制")})}}},Layer:{Div:function(e){layer.open({type:1,title:!1,skin:"layui-layer-rim",content:$(e)})},Img:function(e,i,t){layer.open({type:1,title:e,skin:"layui-layer-rim",content:'<div class="col-pd"><p><img src="'+i+'" width="240" /></p><p class="text-center">'+t+"</p></div>"})},Html:function(e,i){layer.open({type:1,title:e,skin:"layui-layer-rim",content:'<div class="col-pd">'+i+"</div>"})},Popbody:function(e,i,t,o,n,a){var r=VideoTheme.Cookie.Get(e);t=$(t).html();r||layer.open({type:1,title:i,skin:"layui-layer-rim",content:t,area:[n+"px",a+"px"],cancel:function(){VideoTheme.Cookie.Set(e,1)}})}},Other:{Headroom:function(){if($("#header-top").length){var e=document.querySelector("#header-top");new Headroom(e,{tolerance:5,offset:205,classes:{initial:"top-fixed",pinned:"top-fixed-up",unpinned:"top-fixed-down"}}).init()}$(".dropdown-hover").click(function(){$(this).find(".dropdown-box").toggle()})},Popup:function(e){$(e).addClass("popup-visible"),$("body").append('<div class="mask"></div>').addClass("hidden"),$(".close-popup").click(function(){$(e).removeClass("popup-visible"),$(".mask").remove(),$("body").removeClass("hidden")}),$(".mask").click(function(){$(e).removeClass("popup-visible"),$(this).remove(),$("body").removeClass("hidden")})},Bootstrap:function(){$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var i=$(e.target).text();$(e.relatedTarget).text(),$("span.active-tab").html(i)})},Sort:function(){$(".sort-button").each(function(){$(this).on("click",function(e){e.preventDefault(),$(this).find("i").eq(0).attr("class","fa fa-sort-numeric-asc"===$(this).find("i").eq(0).attr("class")?"fa fa-sort-numeric-desc":"fa fa-sort-numeric-asc"),$(this).parent().parent().parent().find(".sort-list").each(function(){for(var e=$(this).find("li"),i=0,t=e.length-1;i<t;){var o=e.eq(i).clone(!0),n=e.eq(t).replaceWith(o);e.eq(i).replaceWith(n),++i,--t}})})})},Refresh:function(){$(".refresh-button").each(function(){$(this).on("click",function(e){e.preventDefault(),$(this).attr("data-id"),VideoTheme.Ajax("/video/update/"+$(this).attr("data-id")+".html","get","json","",function(e){layer.msg(e.msg,{anim:5},function(){location.reload()}),window.location.reload()},function(){layer.msg("更新失败")})})})},Search:function(){$(".search-select p,.search-select li").click(function(){var e=$(this).attr("data-action");$("#search").attr("action",e),$(".search-select .text").text($(this).html())}),$(".search_submit").click(function(){if(!$(".search_wd").val()){var e=$(".search_wd").attr("placeholder");$(".search_wd").val(e)}}),$(".open-search").click(function(){var e=$(".search-box");e.addClass("active").siblings().hide(),e.find(".form-control").focus(),e.find(".head-dropdown").toggle(),$(".search-close").click(function(){e.removeClass("active").siblings().show(),e.find(".dropdown-box").hide()})})},Collapse:function(){$(".text-collapse").each(function(){$(this).find(".details").on("click",function(){$(this).parent().find(".sketch").addClass("hide"),$(this).parent().find(".data").css("display",""),$(this).remove()})})},Scrolltop:function(){var e=$(window);$scrollTopLink=$("a.backtop"),e.scroll(function(){500<$(this).scrollTop()?$scrollTopLink.css("display",""):$scrollTopLink.css("display","none")}),$scrollTopLink.on("click",function(){return $("html, body").animate({scrollTop:0},400),!0})},Slidedown:function(){var e=$(".slideDown-box");$(".slideDown-btn").click(function(){"block"===e.css("display")?(e.slideUp("slow"),$(this).html('展开  <i class="fa fa-angle-down"></i>'),VideoTheme.Mobile.Nav.Init()):(e.slideDown("slow"),$(this).html('收起   <i class="fa fa-angle-up"></i>'),VideoTheme.Mobile.Nav.Init())})},History:{Init:function(){if($(".vod_history").length){var e=$(".vod_history");VideoTheme.Other.History.Set(e.attr("data-name"),e.attr("data-link"),e.attr("data-pic"),e.attr("data-part"),e.attr("data-limit"))}},Set:function(name,link,pic,part,limit){link||(link=document.URL);var history=VideoTheme.LocalStorage.Get("history"),len=0,canadd=!0;if(history&&(history=eval("("+history+")"),len=history.length,$(history).each(function(){if(name===this.name){canadd=!1;var e="[";return $(history).each(function(i){var t,o,n,a;this.name===name?(t=name,o=pic,n=link,a=part):(t=this.name,o=this.pic,n=this.link,a=this.part),e+='{"name":"'+t+'","pic":"'+o+'","link":"'+n+'","part":"'+a+'"}',i!=len-1&&(e+=",")}),e+="]",VideoTheme.LocalStorage.Set("history",e,7),!1}})),canadd){var json="[",isfirst="]";for(isfirst=len?",":"]",json+='{"name":"'+name+'","pic":"'+pic+'","link":"'+link+'","part":"'+part+'"}'+isfirst,len>limit-1&&(len-=1),i=0;i<len-1;i++)json+='{"name":"'+history[i].name+'","pic":"'+history[i].pic+'","link":"'+history[i].link+'","part":"'+history[i].part+'"},';len>0&&(json+='{"name":"'+history[len-1].name+'","pic":"'+history[len-1].pic+'","link":"'+history[len-1].link+'","part":"'+history[len-1].part+'"}]'),VideoTheme.LocalStorage.Set("history",json,7)}}},Player:function(){if($("#player-left").length){var e=$("#player-left"),i=$("#player-sidebar"),t=e.outerHeight(),o=$("#playlist li.active").position().top;$("#player-sidebar-is").click(function(){i.toggle(),"none"===i.css("display")&&(e.css("width","100%"),$(this).html("<i class='fa fa-angle-left'></i>")),"block"===i.css("display")&&(e.css("width",""),$(this).html("<i class='fa fa-angle-right'></i>"))}),VideoTheme.Browser.useragent.mobile||(i.css({height:t,overflow:"auto"}),i.scrollTop(o))}$(".player-fixed").length&&(VideoTheme.Browser.useragent.mobile||$(window).scroll(function(){$(window).scrollTop()>window.outerHeight?($(".player-fixed").addClass("fixed fadeInDown"),$(".player-fixed-off").show()):$(window).scrollTop()<window.outerHeight&&($(".player-fixed").removeClass("fixed fadeInDown"),$(".player-fixed-off").hide())}),$(".player-fixed-off").click(function(){$(".player-fixed").removeClass("fixed fadeInDown")}))},Close:function(){$(".close-btn").on("click",function(){$(this).parents(".close-box").remove()})},Roll:function(e,i){setInterval(function(){$(e).find("ul").animate({marginTop:i},1e3,function(){$(this).css({marginTop:"0px"}).find("li:first").appendTo(this)})},3e3)}}};$(function(){VideoTheme.Browser.useragent.mobile&&(VideoTheme.Mobile.Nav.Init(),VideoTheme.Mobile.Mshare()),VideoTheme.Images.Lazyload(),VideoTheme.Images.Qrcode.Init(),VideoTheme.Images.Flickity.Init(),VideoTheme.Link.Copy.Init(),VideoTheme.Other.Bootstrap(),VideoTheme.Other.Sort(),VideoTheme.Other.Refresh(),VideoTheme.Other.Headroom(),VideoTheme.Other.Search(),VideoTheme.Other.Collapse(),VideoTheme.Other.Slidedown(),VideoTheme.Other.Scrolltop(),VideoTheme.Other.History.Init(),VideoTheme.Other.Player(),VideoTheme.Other.Close()});